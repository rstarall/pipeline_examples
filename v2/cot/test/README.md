# LightRAGæµå¼æ¥å£æµ‹è¯•å·¥å…·

æœ¬ç›®å½•åŒ…å«ç”¨äºæµ‹è¯•LightRAGæµå¼æ¥å£çš„æµ‹è¯•è„šæœ¬ï¼Œä¸»è¦æµ‹è¯• `http://117.50.252.245:9621/query/stream` æ¥å£çš„æµå¼è¾“å‡ºåŠŸèƒ½ã€‚

## ğŸ“‹ æ–‡ä»¶è¯´æ˜

### 1. test_lightrag_stream.py
å®Œæ•´çš„æµ‹è¯•å¥—ä»¶ï¼ŒåŒ…å«å¤šä¸ªæµ‹è¯•ç”¨ä¾‹å’Œè¯¦ç»†çš„è¾“å‡ºä¿¡æ¯ã€‚

**åŠŸèƒ½ç‰¹ç‚¹ï¼š**
- æœåŠ¡å¥åº·æ£€æŸ¥
- å¤šç§æŸ¥è¯¢æ¨¡å¼æµ‹è¯•ï¼ˆhybridã€localã€globalï¼‰
- ä¸­è‹±æ–‡æŸ¥è¯¢æµ‹è¯•
- è¯¦ç»†çš„æµå¼æ•°æ®åˆ†æ
- å®Œæ•´çš„æµ‹è¯•æŠ¥å‘Š

### 2. quick_test.py
ç®€åŒ–çš„å¿«é€Ÿæµ‹è¯•è„šæœ¬ï¼Œç”¨äºå•æ¬¡æŸ¥è¯¢æµ‹è¯•ã€‚

**åŠŸèƒ½ç‰¹ç‚¹ï¼š**
- å¿«é€Ÿå•æ¬¡æŸ¥è¯¢æµ‹è¯•
- å®æ—¶æ˜¾ç¤ºæµå¼è¾“å‡º
- ç®€æ´çš„è¾“å‡ºæ ¼å¼
- æ”¯æŒè‡ªå®šä¹‰å‚æ•°

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å®Œæ•´æµ‹è¯•å¥—ä»¶

```bash
# ä½¿ç”¨é»˜è®¤æœåŠ¡åœ°å€
python test_lightrag_stream.py

# ä½¿ç”¨è‡ªå®šä¹‰æœåŠ¡åœ°å€
python test_lightrag_stream.py http://your-server:port
```

### å¿«é€Ÿæµ‹è¯•

```bash
# ä½¿ç”¨é»˜è®¤å‚æ•°
python quick_test.py

# è‡ªå®šä¹‰æœåŠ¡åœ°å€
python quick_test.py http://117.50.252.245:9621

# è‡ªå®šä¹‰æŸ¥è¯¢å†…å®¹
python quick_test.py http://117.50.252.245:9621 "ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿ"

# è‡ªå®šä¹‰æ‰€æœ‰å‚æ•°
python quick_test.py http://117.50.252.245:9621 "ä»€ä¹ˆæ˜¯æ·±åº¦å­¦ä¹ ï¼Ÿ" hybrid
```

## ğŸ“Š æµ‹è¯•å†…å®¹

### æµ‹è¯•çš„æŸ¥è¯¢æ¨¡å¼
- **hybrid**: æ··åˆæ¨¡å¼ï¼ˆé»˜è®¤ï¼‰
- **local**: æœ¬åœ°æ£€ç´¢æ¨¡å¼
- **global**: å…¨å±€æ£€ç´¢æ¨¡å¼

### æµ‹è¯•çš„æŸ¥è¯¢ç±»å‹
- ä¸­æ–‡æŸ¥è¯¢ï¼šæµ‹è¯•ä¸­æ–‡æ–‡æœ¬å¤„ç†èƒ½åŠ›
- è‹±æ–‡æŸ¥è¯¢ï¼šæµ‹è¯•è‹±æ–‡æ–‡æœ¬å¤„ç†èƒ½åŠ›
- æŠ€æœ¯æŸ¥è¯¢ï¼šæµ‹è¯•ä¸“ä¸šæœ¯è¯­å¤„ç†èƒ½åŠ›

## ğŸ”§ æ¥å£è§„æ ¼

### è¯·æ±‚æ ¼å¼
```json
POST /query/stream
Content-Type: application/json
Accept: application/x-ndjson

{
    "query": "æŸ¥è¯¢å†…å®¹",
    "mode": "hybrid"
}
```

### å“åº”æ ¼å¼
æµå¼NDJSONå“åº”ï¼Œæ¯è¡Œä¸€ä¸ªJSONå¯¹è±¡ï¼š

```json
{"response": "å“åº”å†…å®¹ç‰‡æ®µ1"}
{"response": "å“åº”å†…å®¹ç‰‡æ®µ2"}
...
```

é”™è¯¯å“åº”ï¼š
```json
{"error": "é”™è¯¯ä¿¡æ¯"}
```

## ğŸ“ˆ è¾“å‡ºç¤ºä¾‹

### æˆåŠŸæµ‹è¯•è¾“å‡º
```
ğŸš€ å¿«é€Ÿæµ‹è¯•LightRAGæµå¼æ¥å£
ğŸŒ æœåŠ¡åœ°å€: http://117.50.252.245:9621
ğŸ“ æŸ¥è¯¢å†…å®¹: ä»€ä¹ˆæ˜¯äººå·¥æ™ºèƒ½ï¼Ÿ
ğŸ”§ æŸ¥è¯¢æ¨¡å¼: hybrid
ğŸ“¡ è¯·æ±‚URL: http://117.50.252.245:9621/query/stream
============================================================
ğŸ“¤ å‘é€è¯·æ±‚...
ğŸ“¡ HTTPçŠ¶æ€ç : 200

ğŸ“¨ æ¥æ”¶æµå¼æ•°æ®:
----------------------------------------
[14:30:15.123] ğŸ“ äººå·¥æ™ºèƒ½ï¼ˆArtificial Intelligenceï¼ŒAIï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦çš„ä¸€ä¸ªåˆ†æ”¯...
[14:30:15.456] ğŸ“ å®ƒæ—¨åœ¨åˆ›å»ºèƒ½å¤Ÿæ‰§è¡Œé€šå¸¸éœ€è¦äººç±»æ™ºèƒ½çš„ä»»åŠ¡çš„è®¡ç®—æœºç³»ç»Ÿ...
[14:30:15.789] ğŸ“ åŒ…æ‹¬å­¦ä¹ ã€æ¨ç†ã€é—®é¢˜è§£å†³ã€æ„ŸçŸ¥å’Œè¯­è¨€ç†è§£ç­‰ã€‚

============================================================
âœ… æµå¼æŸ¥è¯¢å®Œæˆ!
ğŸ“Š ç»Ÿè®¡ä¿¡æ¯:
   - è€—æ—¶: 2.35 ç§’
   - æ€»å†…å®¹é•¿åº¦: 1256 å­—ç¬¦
   - æ•°æ®å—æ•°é‡: 15
ğŸ‰ æµ‹è¯•æˆåŠŸï¼
```

### é”™è¯¯æµ‹è¯•è¾“å‡º
```
âŒ æ— æ³•è¿æ¥åˆ°æœåŠ¡: Connection refused
âŒ æµ‹è¯•å¤±è´¥ï¼
```

## ğŸ› æ•…éšœæ’æŸ¥

### å¸¸è§é—®é¢˜

1. **è¿æ¥è¶…æ—¶**
   - æ£€æŸ¥æœåŠ¡åœ°å€æ˜¯å¦æ­£ç¡®
   - ç¡®è®¤æœåŠ¡æ˜¯å¦æ­£åœ¨è¿è¡Œ
   - æ£€æŸ¥ç½‘ç»œè¿æ¥

2. **HTTP 404é”™è¯¯**
   - ç¡®è®¤æ¥å£è·¯å¾„ `/query/stream` æ˜¯å¦æ­£ç¡®
   - æ£€æŸ¥æœåŠ¡ç‰ˆæœ¬æ˜¯å¦æ”¯æŒæµå¼æ¥å£

3. **JSONè§£æé”™è¯¯**
   - æ£€æŸ¥æœåŠ¡è¿”å›çš„æ•°æ®æ ¼å¼
   - ç¡®è®¤æ˜¯å¦ä¸ºNDJSONæ ¼å¼

4. **è¯·æ±‚è¶…æ—¶**
   - å¢åŠ è¶…æ—¶æ—¶é—´è®¾ç½®
   - æ£€æŸ¥æŸ¥è¯¢å¤æ‚åº¦

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹è¯¦ç»†HTTPä¿¡æ¯**
   ä¿®æ”¹è„šæœ¬ä¸­çš„ `timeout` å’Œ `chunk_size` å‚æ•°

2. **åˆ†æåŸå§‹å“åº”**
   åœ¨è„šæœ¬ä¸­æ·»åŠ åŸå§‹æ•°æ®æ‰“å°ï¼š
   ```python
   print(f"åŸå§‹æ•°æ®: {chunk}")
   ```

## ğŸ“‹ ä¾èµ–requirements

```
requests>=2.25.0
```

å®‰è£…ä¾èµ–ï¼š
```bash
pip install requests
```

---

*è¯¥æµ‹è¯•å·¥å…·åŸºäº COT LightRAG Stream Pipeline çš„æ¥å£è§„æ ¼å¼€å‘* 